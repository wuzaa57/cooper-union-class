<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script> 
<script src="http://underscorejs.org/underscore-min.js"></script>
<script type="text/javascript">


$(document).ready(function(){

	var story = {
	
		page_3: {
			url: 'http://camilamercado.com/GooseBumps1/003.htm',
			content: [
				{
					page:16,
					name:'YoYo'
				}, 
				{
					page:101,
					name:'Cellar'
				}
			]
		},

		page_16: {
			url: 'http://camilamercado.com/GooseBumps1/016.htm',
			content: [
				{
					page:64,
					name:'Follow'
				}, 
				{
					page:44,
					name:'Stay'
				}
			]
		},

		page_101: {
			url: 'http://camilamercado.com/GooseBumps1/101.htm',
			content: [
				{
					page:1,
					name:'Start Over'
				}
			]
		},


		page_64: {
			url: 'http://camilamercado.com/GooseBumps1/064.htm',
			content: [
				{
					page:24,
					name:'Farmhouse'
				}, 
				{
					page:106,
					name:'Running'
				}
			]
		}
	}
	
	var assertion = "yoyo";
	
	
	var nextPage = function(story, assertion) {
		
		var nextPage;
		
		_.each(story, function(step, key) {
			
			_.each(step.content, function(content, key) {
	
				if(content.name.toLowerCase() === assertion.toLowerCase()) {
					nextPage = 'page_' + content.page;
				}
			});
	
		});
		
		return nextPage;
	};
	
	
	var response = function (nextPage){

		var storyPage = story[nextPage];
		return storyPage;

	};						
	
	
	console.log(
		response(
			nextPage(story, assertion)
		)
	);

	
	
	/*
	var nextPage = nextPage(story, "start over");
	console.log(nextPage);
	*/
	
	//find all of the tweets
	
		//with each tweet, look at the contents of the tweet
		
		//look at the phrase, see if it is one of the keys in the next story step
		
			//if the next story step has been found, repsond to the user with that step's info
			
			//if the step can't be found, offer choices...
	
	
	


});

</script>